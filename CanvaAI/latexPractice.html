<!--
    DP LaTeX Practice Tool
    
    Developer: Mike Poirier
    Initial Build: September 16, 2025
    Created with: Canva AI
    
    Project Summary:
    This interactive web application was created through a series of prompts to Canva AI:
    1. Initial request for an IB Diploma Programme LaTeX practice tool
    2. Organized subjects by DP groups (Sciences, Mathematics, Individuals & Societies)
    3. Added comprehensive challenges for each subject with hints and feedback
    4. Implemented live LaTeX preview using MathJax
    5. Created reference sections with subject-specific LaTeX commands
    6. Enhanced UI with responsive design and professional styling
    7. Refined layout by removing empty sections and making components more compact
    8. Added LaTeX Skills Progression section with Fundamentals, Advanced, and LaTeXTREME levels
    9. Created 13 total subject areas including skill-based progression tracks
    10. Enhanced challenge difficulty scaling from basic text to complex statistical tables
    11. Fixed LaTeXTREME challenge #10 multicolumn syntax error for proper table rendering
    12. Improved subject organization with clear visual groupings and skill progression
    
    Features:
    - 13 subjects across 3 DP groups plus 3 skill progression levels
    - 10 practice challenges per subject with hints and solutions (130 total challenges)
    - Real-time LaTeX rendering and preview with MathJax
    - Comprehensive reference guide for LaTeX commands
    - Skill-based progression from basics to advanced LaTeX
    - Subject-specific LaTeX notation and formatting
    - Responsive design for all devices
    - Professional gradient styling and smooth animations
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DP LaTeX Practice Tool</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            }
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }
        
        .subject-selector {
            grid-column: 1 / -1;
            margin-bottom: 20px;
        }
        
        .subject-groups {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .dp-groups-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }
        
        .subject-group {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid #667eea;
        }
        
        .basics-section {
            border-left: 4px solid #28a745;
            background: #f8fff9;
        }
        
        .group-title {
            color: #495057;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .subject-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .subject-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: #f8f9fa;
            color: #495057;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .subject-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .subject-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .practice-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }
        
        .practice-section h3 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        #challengeCounter {
            font-size: 0.9rem;
            color: #667eea;
            font-weight: 600;
        }
        
        .challenge-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .challenge-text {
            font-size: 1.1rem;
            color: #495057;
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .latex-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }
        
        .latex-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .preview-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
        }
        
        .preview-box {
            background: white;
            border-radius: 10px;
            padding: 30px;
            min-height: 150px;
            border: 2px dashed #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .expected-output-section {
            margin-top: 25px;
        }
        
        .expected-output-section h4 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .expected-output-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            min-height: 100px;
            border: 2px solid #28a745;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .feedback {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-weight: 600;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .hint-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            color: #856404;
        }
        
        .reference-section {
            grid-column: 1 / -1;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .reference-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .reference-card h4 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .reference-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f1f3f4;
        }
        
        .reference-item:last-child {
            border-bottom: none;
        }
        
        .latex-code {
            font-family: 'Courier New', monospace;
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .subject-groups {
                gap: 15px;
            }
            
            .dp-groups-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .subject-group {
                padding: 15px;
            }
            
            .group-title {
                font-size: 1rem;
                margin-bottom: 10px;
            }
            
            .subject-buttons {
                justify-content: center;
            }
            
            .subject-btn {
                font-size: 0.8rem;
                padding: 10px 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎓 DP LaTeX Practice Tool</h1>
            <p>Master mathematical notation for IB Diploma Programme courses</p>
        </div>
        
        <div class="main-content">
            <div class="subject-selector">
                <div class="subject-groups">
                    <div class="subject-group basics-section">
                        <h4 class="group-title">🎯 LaTeX Skills Progression</h4>
                        <div class="subject-buttons">
                            <button class="subject-btn active" data-subject="basics">📝 LaTeX Fundamentals</button>
                            <button class="subject-btn" data-subject="advanced">🚀 LaTeX Advanced</button>
                            <button class="subject-btn" data-subject="extreme">⚡ LaTeXTREME!</button>
                        </div>
                    </div>
                    
                    <div class="dp-groups-row">
                        <div class="subject-group">
                            <h4 class="group-title">Group 3: Individuals & Societies</h4>
                            <div class="subject-buttons">
                                <button class="subject-btn" data-subject="economics">💰 Economics</button>
                                <button class="subject-btn" data-subject="psychology">🧠 Psychology</button>
                                <button class="subject-btn" data-subject="geography">🌍 Geography</button>
                                <button class="subject-btn" data-subject="business">💼 Business Management</button>
                            </div>
                        </div>
                        
                        <div class="subject-group">
                            <h4 class="group-title">Group 4: Sciences</h4>
                            <div class="subject-buttons">
                                <button class="subject-btn" data-subject="physics">⚛️ Physics</button>
                                <button class="subject-btn" data-subject="chemistry">🧪 Chemistry</button>
                                <button class="subject-btn" data-subject="biology">🧬 Biology</button>
                                <button class="subject-btn" data-subject="ess">🌱 Environmental Systems</button>
                                <button class="subject-btn" data-subject="sports">⚽ Sports Science</button>
                            </div>
                        </div>
                        
                        <div class="subject-group">
                            <h4 class="group-title">Group 5: Mathematics</h4>
                            <div class="subject-buttons">
                                <button class="subject-btn" data-subject="math-aa-sl">📊 Math AA SL</button>
                                <button class="subject-btn" data-subject="math-aa-hl">📈 Math AA HL</button>
                                <button class="subject-btn" data-subject="math-ai-sl">📉 Math AI SL</button>
                                <button class="subject-btn" data-subject="math-ai-hl">📋 Math AI HL</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="practice-section">
                <h3>📝 Practice Challenge <span id="challengeCounter">1 of 10</span></h3>
                <div class="challenge-card">
                    <div class="challenge-text" id="challengeText">
                        Write the quadratic formula in LaTeX notation.
                    </div>
                    <textarea class="latex-input" id="latexInput" placeholder="Type your LaTeX code here..." rows="3"></textarea>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="checkAnswer()">✓ Check Answer</button>
                        <button class="btn btn-secondary" onclick="showHint()">💡 Hint</button>
                        <button class="btn btn-success" onclick="nextChallenge()">➡️ Next Challenge</button>
                    </div>
                    <div id="feedback"></div>
                    <div id="hintBox"></div>
                </div>
            </div>
            
            <div class="preview-section">
                <h3>👁️ Live Preview</h3>
                <div class="preview-box" id="previewBox">
                    <span style="color: #6c757d;">Your LaTeX will render here...</span>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="renderPreview()">🔄 Update Preview</button>
                    <button class="btn btn-secondary" onclick="clearInput()">🗑️ Clear</button>
                </div>
                
                <div class="expected-output-section">
                    <h4>🎯 Expected Output</h4>
                    <div class="expected-output-box" id="expectedOutputBox">
                        <span style="color: #6c757d;">The correct answer will appear here...</span>
                    </div>
                </div>
            </div>
            
            <div class="reference-section">
                <h3>📚 Quick Reference</h3>
                <div class="reference-grid" id="referenceGrid">
                    <!-- Reference cards will be populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <footer style="background: linear-gradient(135deg, #495057 0%, #343a40 100%); color: white; text-align: center; padding: 20px; margin-top: 30px;">
            <p style="margin: 0; font-size: 0.9rem;">
                Developed by <strong>Mike Poirier</strong> with <strong>Canva AI</strong> | 
                Licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" style="color: #87ceeb; text-decoration: none;">Creative Commons Attribution 4.0</a>
            </p>
            <p style="margin: 5px 0 0 0; font-size: 0.8rem; opacity: 0.8;">
                Build: September 16, 2025
            </p>
        </footer>
    </div>

    <script>
        const challenges = {
            basics: [
                {
                    text: "Type the letter x (no special formatting needed).",
                    answer: "x",
                    hint: "Just type the letter x - no LaTeX commands needed for simple letters!"
                },
                {
                    text: "Write 2 + 3 = 5 (simple addition).",
                    answer: "2 + 3 = 5",
                    hint: "Type it exactly as you would on paper - no special LaTeX needed for basic arithmetic."
                },
                {
                    text: "Write x squared using LaTeX superscript notation.",
                    answer: "x^2",
                    hint: "Use the ^ symbol followed by the number 2 to create a superscript."
                },
                {
                    text: "Write H subscript 2 O (water formula) using LaTeX.",
                    answer: "H_2O",
                    hint: "Use the _ symbol followed by the number to create a subscript."
                },
                {
                    text: "Write a simple fraction: 1 over 2.",
                    answer: "\\frac{1}{2}",
                    hint: "Use \\frac{numerator}{denominator} - so \\frac{1}{2} for one-half."
                },
                {
                    text: "Write the square root of 4.",
                    answer: "\\sqrt{4}",
                    hint: "Use \\sqrt{} with the number inside the curly braces."
                },
                {
                    text: "Write x to the power of 3 (x cubed).",
                    answer: "x^3",
                    hint: "Use ^ followed by 3 to show x to the third power."
                },
                {
                    text: "Write the Greek letter pi (π).",
                    answer: "\\pi",
                    hint: "Use \\pi to create the Greek letter π."
                },
                {
                    text: "Write 'speed' as regular text inside a math expression.",
                    answer: "\\text{speed}",
                    hint: "Use \\text{} to write regular words inside math expressions."
                },
                {
                    text: "Create a simple 2×2 table with headers 'x' and 'y' and one data row.",
                    answer: "\\begin{array}{|c|c|} \\hline x & y \\\\ \\hline 1 & 2 \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|} for table structure, \\hline for lines, & for columns, and \\\\ for new rows."
                }
            ],
            advanced: [
                {
                    text: "Write a complex fraction with nested fractions: (a/b) over (c/d).",
                    answer: "\\frac{\\frac{a}{b}}{\\frac{c}{d}}",
                    hint: "Use nested \\frac{}{} commands - put one fraction inside another fraction."
                },
                {
                    text: "Create a summation from i=1 to n of x_i.",
                    answer: "\\sum_{i=1}^{n} x_i",
                    hint: "Use \\sum with _{} for the lower limit and ^ for the upper limit."
                },
                {
                    text: "Write a matrix with 3 rows and 2 columns using parentheses.",
                    answer: "\\begin{pmatrix} a & b \\\\ c & d \\\\ e & f \\end{pmatrix}",
                    hint: "Use \\begin{pmatrix} for parentheses matrices, & for columns, \\\\ for new rows."
                },
                {
                    text: "Express a limit as x approaches infinity of 1/x.",
                    answer: "\\lim_{x \\to \\infty} \\frac{1}{x}",
                    hint: "Use \\lim with _{} for the limit condition, \\to for approaches, \\infty for infinity."
                },
                {
                    text: "Write a definite integral from 0 to π of sin(x) dx.",
                    answer: "\\int_0^{\\pi} \\sin(x) \\, dx",
                    hint: "Use \\int with _{} for lower limit, ^ for upper limit, \\sin for sine, \\, for spacing."
                },
                {
                    text: "Create a system of equations using cases.",
                    answer: "\\begin{cases} x + y = 5 \\\\ 2x - y = 1 \\end{cases}",
                    hint: "Use \\begin{cases} for equation systems, \\\\ for new lines, no & needed."
                },
                {
                    text: "Write a binomial coefficient 'n choose k' with large parentheses.",
                    answer: "\\binom{n}{k} \\text{ or } \\left(\\begin{array}{c} n \\\\ k \\end{array}\\right)",
                    hint: "Use \\binom{n}{k} for the simple version, or \\left( with array for the expanded form."
                },
                {
                    text: "Express a partial derivative of f with respect to x.",
                    answer: "\\frac{\\partial f}{\\partial x}",
                    hint: "Use \\partial for partial derivatives instead of d in \\frac{}{}."
                },
                {
                    text: "Create a 3×3 determinant using vertical bars.",
                    answer: "\\begin{vmatrix} a & b & c \\\\ d & e & f \\\\ g & h & i \\end{vmatrix}",
                    hint: "Use \\begin{vmatrix} for determinant notation with vertical bars."
                },
                {
                    text: "Build a complex table with merged cells and multiple column types.",
                    answer: "\\begin{array}{|l|c|r|} \\hline \\text{Left} & \\text{Center} & \\text{Right} \\\\ \\hline \\text{Data 1} & 123 & \\$45.67 \\\\ \\text{Data 2} & 456 & \\$89.01 \\\\ \\hline \\end{array}",
                    hint: "Use |l|c|r| for left, center, right alignment. Use \\text{} for text and \\$ for currency."
                }
            ],
            extreme: [
                {
                    text: "Create a triple integral with complex bounds and multiple variables.",
                    answer: "\\iiint_V f(x,y,z) \\, dx \\, dy \\, dz = \\int_0^1 \\int_0^{\\sqrt{1-x^2}} \\int_0^{\\sqrt{x^2+y^2}} f(x,y,z) \\, dz \\, dy \\, dx",
                    hint: "Use \\iiint for triple integrals, \\sqrt{} for square roots, and \\, for proper spacing."
                },
                {
                    text: "Write the Fourier transform with complex exponentials and infinity bounds.",
                    answer: "\\mathcal{F}\\{f(t)\\} = F(\\omega) = \\int_{-\\infty}^{\\infty} f(t) e^{-i\\omega t} \\, dt",
                    hint: "Use \\mathcal{F} for script F, \\{\\} for set notation, e^{} for exponentials, \\omega for omega."
                },
                {
                    text: "Construct a complex matrix equation with inverse and transpose operations.",
                    answer: "\\mathbf{A}^{-1} \\mathbf{B}^T \\mathbf{x} = \\mathbf{c} \\text{ where } \\mathbf{A} = \\begin{pmatrix} a_{11} & a_{12} \\\\ a_{21} & a_{22} \\end{pmatrix}",
                    hint: "Use \\mathbf{} for bold matrices, ^{-1} for inverse, ^T for transpose, _{} for subscripts."
                },
                {
                    text: "Express a complex analysis residue theorem with contour integral.",
                    answer: "\\oint_C f(z) \\, dz = 2\\pi i \\sum_{k} \\text{Res}(f, z_k)",
                    hint: "Use \\oint for contour integrals, \\pi for pi, \\sum for summation, \\text{Res} for residue."
                },
                {
                    text: "Write a quantum mechanics Schrödinger equation with Hamiltonian operator.",
                    answer: "i\\hbar \\frac{\\partial}{\\partial t} |\\psi(t)\\rangle = \\hat{H} |\\psi(t)\\rangle",
                    hint: "Use \\hbar for reduced Planck constant, \\partial for partials, |\\rangle for ket notation, \\hat{} for operators."
                },
                {
                    text: "Create a commutative diagram with arrows and multiple levels.",
                    answer: "\\begin{array}{ccc} A & \\xrightarrow{f} & B \\\\ \\downarrow{g} & & \\downarrow{h} \\\\ C & \\xrightarrow{k} & D \\end{array}",
                    hint: "Use \\xrightarrow{} for labeled arrows, \\downarrow{} for vertical arrows, array for positioning."
                },
                {
                    text: "Express a tensor equation with multiple indices and Einstein notation.",
                    answer: "T^{\\mu\\nu}_{\\phantom{\\mu\\nu}\\rho\\sigma} = g^{\\mu\\alpha} g^{\\nu\\beta} T_{\\alpha\\beta\\rho\\sigma}",
                    hint: "Use ^{} for upper indices, _{} for lower indices, \\phantom{} for spacing, g for metric tensor."
                },
                {
                    text: "Write a complex statistical formula with multiple summations and products.",
                    answer: "\\mathcal{L}(\\theta) = \\prod_{i=1}^n f(x_i|\\theta) = \\prod_{i=1}^n \\frac{1}{\\sqrt{2\\pi\\sigma^2}} \\exp\\left(-\\frac{(x_i-\\mu)^2}{2\\sigma^2}\\right)",
                    hint: "Use \\mathcal{L} for script L, \\prod for products, \\exp for exponential, \\left( \\right) for large parentheses."
                },
                {
                    text: "Construct a complex proof environment with numbered equations and alignment.",
                    answer: "\\begin{align} f(x) &= \\sum_{n=0}^{\\infty} \\frac{f^{(n)}(a)}{n!}(x-a)^n \\\\ &= f(a) + f'(a)(x-a) + \\frac{f''(a)}{2!}(x-a)^2 + \\cdots \\end{align}",
                    hint: "Use \\begin{align} for aligned equations, & for alignment points, \\cdots for continuation dots."
                },
                {
                    text: "Create an advanced statistical table with complex notation and multiple levels.",
                    answer: "\\begin{array}{|c|c|c|c|} \\hline \\text{Model} & \\hat{\\beta}_0 \\pm SE & \\hat{\\beta}_1 \\pm SE & R^2_{adj} \\\\ \\hline \\text{Linear} & 2.34 \\pm 0.12 & 1.67 \\pm 0.08 & 0.892^{***} \\\\ \\text{Quadratic} & 1.89 \\pm 0.15 & 2.01 \\pm 0.11 & 0.934^{***} \\\\ \\text{Cubic} & 1.56 \\pm 0.18 & 2.45 \\pm 0.14 & 0.967^{***} \\\\ \\hline \\text{Note: } ^{***} p < 0.001 & & & \\\\ \\hline \\end{array}",
                    hint: "Use \\hat{} for estimates, \\pm for plus-minus, empty cells with & &, ^{***} for significance."
                }
            ],
            'math-aa-sl': [
                {
                    text: "Write a simple linear equation: y = 2x + 3.",
                    answer: "y = 2x + 3",
                    hint: "This is straightforward - just type the equation as shown."
                },
                {
                    text: "Write the quadratic function f(x) = x² - 4x + 3.",
                    answer: "f(x) = x^2 - 4x + 3",
                    hint: "Use ^ for the squared term. Type x^2 for x squared."
                },
                {
                    text: "Express the exponential function y = 2^x.",
                    answer: "y = 2^x",
                    hint: "Use ^ for the exponent. The base is 2 and the exponent is x."
                },
                {
                    text: "Write the derivative notation f'(x).",
                    answer: "f'(x)",
                    hint: "Use the apostrophe (prime) symbol after f to show the derivative."
                },
                {
                    text: "Express the definite integral from 0 to 2 of x dx.",
                    answer: "\\int_0^2 x \\, dx",
                    hint: "Use \\int with _{} for lower limit and ^ for upper limit. Add \\, for spacing before dx."
                },
                {
                    text: "Write the quadratic formula.",
                    answer: "x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}",
                    hint: "Use \\frac{}{} for fractions, \\pm for plus-minus, \\sqrt{} for square root."
                },
                {
                    text: "Express the arithmetic sequence formula for the nth term.",
                    answer: "u_n = u_1 + (n-1)d",
                    hint: "Use _{} for subscripts. In IB, sequences often use u_n notation."
                },
                {
                    text: "Write the equation of a circle with center (a,b) and radius r.",
                    answer: "(x-a)^2 + (y-b)^2 = r^2",
                    hint: "Use ^ for squared terms and parentheses for the center coordinates."
                },
                {
                    text: "Express the limit as x approaches 2 of (x² - 4)/(x - 2).",
                    answer: "\\lim_{x \\to 2} \\frac{x^2 - 4}{x - 2}",
                    hint: "Use \\lim with _{} for the limit condition, \\to for approaches, and \\frac{}{} for the fraction."
                },
                {
                    text: "Create a table of values for f(x) = x² showing x from -2 to 2.",
                    answer: "\\begin{array}{|c|c|} \\hline x & f(x) = x^2 \\\\ \\hline -2 & 4 \\\\ -1 & 1 \\\\ 0 & 0 \\\\ 1 & 1 \\\\ 2 & 4 \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|} for table structure. Calculate f(x) = x² for each x value."
                }
            ],
            'math-aa-hl': [
                {
                    text: "Write a complex number in standard form: z = 3 + 4i.",
                    answer: "z = 3 + 4i",
                    hint: "Use i for the imaginary unit. This is the standard a + bi form."
                },
                {
                    text: "Express a vector in component form: v = (2, -1, 3).",
                    answer: "\\vec{v} = \\begin{pmatrix} 2 \\\\ -1 \\\\ 3 \\end{pmatrix}",
                    hint: "Use \\vec{} for vector notation and \\begin{pmatrix} for column vector form."
                },
                {
                    text: "Write the derivative using Leibniz notation: dy/dx.",
                    answer: "\\frac{dy}{dx}",
                    hint: "Use \\frac{dy}{dx} for the Leibniz derivative notation."
                },
                {
                    text: "Express the dot product of vectors u and v.",
                    answer: "\\vec{u} \\cdot \\vec{v}",
                    hint: "Use \\vec{} for vectors and \\cdot for the dot product symbol."
                },
                {
                    text: "Write a 2×2 matrix with elements a, b, c, d.",
                    answer: "\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}",
                    hint: "Use \\begin{pmatrix} for matrices, & for column separation, and \\\\ for new rows."
                },
                {
                    text: "Express the complex number in exponential form using Euler's formula.",
                    answer: "z = re^{i\\theta}",
                    hint: "Use e^{i\\theta} for Euler's exponential form, where r is modulus and θ is argument."
                },
                {
                    text: "Write the binomial coefficient 'n choose k'.",
                    answer: "\\binom{n}{k}",
                    hint: "Use \\binom{n}{k} for binomial coefficient notation."
                },
                {
                    text: "Express the infinite series sum from n=0 to infinity of ar^n.",
                    answer: "\\sum_{n=0}^{\\infty} ar^n",
                    hint: "Use \\sum for summation, _{} for lower limit, ^ for upper limit, and \\infty for infinity."
                },
                {
                    text: "Write the parametric vector equation of a line: r = a + tb.",
                    answer: "\\vec{r} = \\vec{a} + t\\vec{b}",
                    hint: "Use \\vec{} for vectors. This is the standard parametric line equation in vector form."
                },
                {
                    text: "Create a table showing complex roots of unity for n=4.",
                    answer: "\\begin{array}{|c|c|} \\hline k & z_k = e^{2\\pi i k/4} \\\\ \\hline 0 & 1 \\\\ 1 & i \\\\ 2 & -1 \\\\ 3 & -i \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|} for table structure. The 4th roots of unity are 1, i, -1, -i."
                }
            ],
            'math-ai-sl': [
                {
                    text: "Write a simple percentage: 25%.",
                    answer: "25\\%",
                    hint: "Use \\% to display the percentage symbol correctly in LaTeX."
                },
                {
                    text: "Express the mean (average) using bar notation.",
                    answer: "\\bar{x}",
                    hint: "Use \\bar{x} to show the mean with a bar over the x."
                },
                {
                    text: "Write the compound interest formula A = P(1 + r)^t.",
                    answer: "A = P(1 + r)^t",
                    hint: "Use ^ for the exponent t. This is the basic compound interest formula."
                },
                {
                    text: "Express the formula for sample standard deviation.",
                    answer: "s = \\sqrt{\\frac{\\sum(x_i - \\bar{x})^2}{n-1}}",
                    hint: "Use \\sqrt{} for square root, \\sum for summation, and \\bar{x} for the mean."
                },
                {
                    text: "Write the linear regression equation y = a + bx.",
                    answer: "y = a + bx",
                    hint: "This is the standard form where a is the y-intercept and b is the slope."
                },
                {
                    text: "Express the correlation coefficient formula (Pearson's r).",
                    answer: "r = \\frac{\\sum(x_i - \\bar{x})(y_i - \\bar{y})}{\\sqrt{\\sum(x_i - \\bar{x})^2\\sum(y_i - \\bar{y})^2}}",
                    hint: "Use \\bar{} for means, \\sum for summation, and \\sqrt{} for square root."
                },
                {
                    text: "Write the normal distribution notation N(μ, σ²).",
                    answer: "N(\\mu, \\sigma^2)",
                    hint: "Use \\mu for mu (mean) and \\sigma for sigma (standard deviation), with ^2 for squared."
                },
                {
                    text: "Express the chi-square test statistic formula.",
                    answer: "\\chi^2 = \\sum \\frac{(O - E)^2}{E}",
                    hint: "Use \\chi for chi-square, \\sum for summation, where O is observed and E is expected."
                },
                {
                    text: "Write the z-score standardization formula.",
                    answer: "z = \\frac{x - \\mu}{\\sigma}",
                    hint: "Use \\mu for population mean, \\sigma for population standard deviation, and \\frac{}{} for the fraction."
                },
                {
                    text: "Create a frequency table showing class intervals and frequencies.",
                    answer: "\\begin{array}{|c|c|} \\hline \\text{Class Interval} & \\text{Frequency} \\\\ \\hline 0-10 & 5 \\\\ 10-20 & 12 \\\\ 20-30 & 8 \\\\ 30-40 & 3 \\\\ \\hline \\text{Total} & 28 \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|} for table structure and \\text{} for descriptive labels."
                }
            ],
            'math-ai-hl': [
                {
                    text: "Write the sample mean formula using summation notation.",
                    answer: "\\bar{x} = \\frac{\\sum_{i=1}^n x_i}{n}",
                    hint: "Use \\bar{x} for sample mean, \\sum with limits, and \\frac{}{} for the fraction."
                },
                {
                    text: "Express the variance formula for a sample.",
                    answer: "s^2 = \\frac{\\sum_{i=1}^n (x_i - \\bar{x})^2}{n-1}",
                    hint: "Use s^2 for sample variance, \\sum with limits, and \\bar{x} for the sample mean."
                },
                {
                    text: "Write the linear regression coefficient formula for slope b.",
                    answer: "b = \\frac{\\sum(x_i - \\bar{x})(y_i - \\bar{y})}{\\sum(x_i - \\bar{x})^2}",
                    hint: "Use \\sum for summation, \\bar{} for means, and \\frac{}{} for the fraction."
                },
                {
                    text: "Express the confidence interval for a population mean.",
                    answer: "\\bar{x} \\pm t_{\\alpha/2} \\frac{s}{\\sqrt{n}}",
                    hint: "Use \\pm for plus-minus, \\bar{x} for sample mean, and \\alpha for significance level."
                },
                {
                    text: "Write the binomial probability formula P(X = k).",
                    answer: "P(X = k) = \\binom{n}{k} p^k (1-p)^{n-k}",
                    hint: "Use \\binom{n}{k} for binomial coefficient, ^ for exponents, and (1-p) for failure probability."
                },
                {
                    text: "Express the normal distribution probability density function.",
                    answer: "f(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}} e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}",
                    hint: "Use \\sigma for standard deviation, \\mu for mean, \\pi for pi, and e^ for exponential."
                },
                {
                    text: "Write the multiple regression equation with two predictors.",
                    answer: "y = \\beta_0 + \\beta_1 x_1 + \\beta_2 x_2 + \\epsilon",
                    hint: "Use \\beta for coefficients, _{} for subscripts, and \\epsilon for the error term."
                },
                {
                    text: "Express the chi-square test statistic for goodness of fit.",
                    answer: "\\chi^2 = \\sum_{i=1}^k \\frac{(O_i - E_i)^2}{E_i}",
                    hint: "Use \\chi for chi-square, \\sum with limits, where O is observed and E is expected."
                },
                {
                    text: "Write the coefficient of determination (R-squared) formula.",
                    answer: "R^2 = 1 - \\frac{SS_{res}}{SS_{tot}} = \\frac{SS_{reg}}{SS_{tot}}",
                    hint: "Use R^2 for coefficient of determination, \\frac{}{} for fractions, and _{} for subscripts."
                },
                {
                    text: "Create a two-way ANOVA summary table.",
                    answer: "\\begin{array}{|l|c|c|c|c|} \\hline \\text{Source} & SS & df & MS & F \\\\ \\hline \\text{Factor A} & SS_A & a-1 & MS_A & F_A \\\\ \\text{Factor B} & SS_B & b-1 & MS_B & F_B \\\\ \\text{Error} & SS_E & (a-1)(b-1) & MS_E & - \\\\ \\hline \\text{Total} & SS_T & ab-1 & - & - \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|l|c|c|c|c|} for five-column table with left-aligned first column."
                }
            ],
            physics: [
                {
                    text: "Write the basic equation for speed: distance over time.",
                    answer: "v = \\frac{d}{t}",
                    hint: "Use \\frac{d}{t} where d is distance and t is time."
                },
                {
                    text: "Express Newton's second law: F = ma.",
                    answer: "F = ma",
                    hint: "Simple equation - force equals mass times acceleration."
                },
                {
                    text: "Write the kinetic energy formula.",
                    answer: "E_k = \\frac{1}{2}mv^2",
                    hint: "Use _{} for subscripts, \\frac{1}{2} for the fraction, and ^ for the squared velocity."
                },
                {
                    text: "Express gravitational potential energy near Earth's surface.",
                    answer: "E_p = mgh",
                    hint: "Use _{} for subscripts. This is potential energy in a uniform gravitational field."
                },
                {
                    text: "Write Ohm's law relating voltage, current, and resistance.",
                    answer: "V = IR",
                    hint: "Simple equation - voltage equals current times resistance."
                },
                {
                    text: "Express the wave equation relating speed, frequency, and wavelength.",
                    answer: "v = f\\lambda",
                    hint: "Use \\lambda for the Greek letter lambda (wavelength)."
                },
                {
                    text: "Write the momentum formula and impulse-momentum theorem.",
                    answer: "p = mv \\text{ and } \\Delta p = F\\Delta t",
                    hint: "Use \\Delta for change, \\text{ and } to separate equations."
                },
                {
                    text: "Express the universal law of gravitation.",
                    answer: "F = G\\frac{m_1 m_2}{r^2}",
                    hint: "Use \\frac{}{} for the fraction, _{} for subscripts, and ^ for the squared distance."
                },
                {
                    text: "Write Einstein's mass-energy equivalence equation.",
                    answer: "E = mc^2",
                    hint: "Use ^ for the squared speed of light. This is the famous mass-energy relation."
                },
                {
                    text: "Create a data table showing projectile motion at different angles.",
                    answer: "\\begin{array}{|c|c|c|} \\hline \\theta \\text{ (°)} & \\text{Range (m)} & \\text{Max Height (m)} \\\\ \\hline 30 & 88.4 & 12.8 \\\\ 45 & 102.0 & 25.5 \\\\ 60 & 88.4 & 38.3 \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|c|} for three-column table, \\theta for angle, and \\text{} for units."
                }
            ],
            chemistry: [
                {
                    text: "Write a simple chemical formula: water (H₂O).",
                    answer: "H_2O",
                    hint: "Use _{} for subscripts. Water has 2 hydrogen atoms and 1 oxygen atom."
                },
                {
                    text: "Express the concentration formula: moles per liter.",
                    answer: "c = \\frac{n}{V}",
                    hint: "Concentration equals moles (n) divided by volume (V). Use \\frac{}{} for the fraction."
                },
                {
                    text: "Write the ideal gas law equation.",
                    answer: "PV = nRT",
                    hint: "This relates pressure, volume, moles, gas constant, and temperature."
                },
                {
                    text: "Express the pH calculation formula.",
                    answer: "pH = -\\log[H^+]",
                    hint: "Use \\log for logarithm, [] for concentration brackets, and ^ for the positive charge."
                },
                {
                    text: "Write the dilution equation relating initial and final concentrations.",
                    answer: "c_1V_1 = c_2V_2",
                    hint: "Use _{} for subscripts to show initial (1) and final (2) conditions."
                },
                {
                    text: "Express the rate law for a reaction: rate = k[A]^m[B]^n.",
                    answer: "\\text{rate} = k[A]^m[B]^n",
                    hint: "Use \\text{} for the word 'rate', [] for concentrations, and ^ for reaction orders."
                },
                {
                    text: "Write the equilibrium constant expression K_c for aA + bB ⇌ cC + dD.",
                    answer: "K_c = \\frac{[C]^c[D]^d}{[A]^a[B]^b}",
                    hint: "Use _{} for subscripts, [] for concentrations, \\frac{}{} for fractions, and ^ for stoichiometric coefficients."
                },
                {
                    text: "Express the enthalpy change calculation using bond enthalpies.",
                    answer: "\\Delta H = \\sum \\text{bonds broken} - \\sum \\text{bonds formed}",
                    hint: "Use \\Delta for enthalpy change, \\sum for summation, and \\text{} for descriptive words."
                },
                {
                    text: "Write the Henderson-Hasselbalch equation for buffer pH.",
                    answer: "pH = pK_a + \\log\\frac{[A^-]}{[HA]}",
                    hint: "Use \\log for logarithm, \\frac{}{} for the ratio, [] for concentrations, and ^ for charges."
                },
                {
                    text: "Create a table showing oxidation states of transition metals.",
                    answer: "\\begin{array}{|c|c|c|} \\hline \\text{Element} & \\text{Common Oxidation States} & \\text{Example Compound} \\\\ \\hline \\text{Fe} & +2, +3 & FeCl_2, Fe_2O_3 \\\\ \\text{Cu} & +1, +2 & Cu_2O, CuSO_4 \\\\ \\text{Mn} & +2, +4, +7 & MnO_2, KMnO_4 \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|c|} for three-column table, \\text{} for element names, and _{} for subscripts in formulas."
                }
            ],
            biology: [
                {
                    text: "Write a simple ratio: 3:1 (as in Mendelian genetics).",
                    answer: "3:1",
                    hint: "Simple ratio - just type the numbers with a colon between them."
                },
                {
                    text: "Express the basic population growth rate equation.",
                    answer: "\\frac{dN}{dt} = rN",
                    hint: "Use \\frac{dN}{dt} for rate of change of population N, where r is growth rate."
                },
                {
                    text: "Write the Hardy-Weinberg equation for allele frequencies.",
                    answer: "p^2 + 2pq + q^2 = 1",
                    hint: "Use ^ for superscripts. p and q represent allele frequencies in a population."
                },
                {
                    text: "Express the exponential population growth model.",
                    answer: "N(t) = N_0 e^{rt}",
                    hint: "Use _{} for subscripts, e^ for exponential growth, where N_0 is initial population."
                },
                {
                    text: "Write the enzyme kinetics equation (Michaelis-Menten).",
                    answer: "v = \\frac{V_{max}[S]}{K_m + [S]}",
                    hint: "Use \\frac{}{} for fractions, _{} for subscripts, [] for substrate concentration."
                },
                {
                    text: "Express the logistic growth equation with carrying capacity.",
                    answer: "\\frac{dN}{dt} = rN\\left(1 - \\frac{N}{K}\\right)",
                    hint: "Use \\left( \\right) for large parentheses, K is carrying capacity."
                },
                {
                    text: "Write the allometric scaling relationship Y = aX^b.",
                    answer: "Y = aX^b",
                    hint: "Use ^ for the exponent b. This shows how biological variables scale with size."
                },
                {
                    text: "Express the Shannon diversity index formula.",
                    answer: "H' = -\\sum_{i=1}^{S} p_i \\ln(p_i)",
                    hint: "Use \\sum for summation, \\ln for natural logarithm, _{} for subscripts."
                },
                {
                    text: "Write the competitive exclusion principle (Lotka-Volterra) equation.",
                    answer: "\\frac{dN_1}{dt} = r_1N_1\\left(\\frac{K_1 - N_1 - \\alpha_{12}N_2}{K_1}\\right)",
                    hint: "Use \\frac{}{} for derivatives, _{} for subscripts, \\alpha for competition coefficient."
                },
                {
                    text: "Create a table showing genetic cross results (dihybrid cross).",
                    answer: "\\begin{array}{|c|c|c|} \\hline \\text{Phenotype} & \\text{Observed} & \\text{Expected Ratio} \\\\ \\hline \\text{Round Yellow} & 315 & 9 \\\\ \\text{Round Green} & 108 & 3 \\\\ \\text{Wrinkled Yellow} & 101 & 3 \\\\ \\text{Wrinkled Green} & 32 & 1 \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|c|} for three-column table showing classic 9:3:3:1 ratio."
                }
            ],
            economics: [
                {
                    text: "Write the basic profit equation: Profit = Revenue - Costs.",
                    answer: "\\text{Profit} = TR - TC",
                    hint: "Use \\text{} for words. TR is total revenue, TC is total cost."
                },
                {
                    text: "Express the total revenue formula.",
                    answer: "TR = P \\times Q",
                    hint: "Total revenue equals price times quantity. Use \\times for multiplication."
                },
                {
                    text: "Write the basic demand function Q_d = a - bP.",
                    answer: "Q_d = a - bP",
                    hint: "Use _{} for subscripts. Q_d represents quantity demanded, P is price."
                },
                {
                    text: "Express the average cost formula.",
                    answer: "AC = \\frac{TC}{Q}",
                    hint: "Average cost equals total cost divided by quantity. Use \\frac{}{} for the fraction."
                },
                {
                    text: "Write the marginal cost formula using calculus notation.",
                    answer: "MC = \\frac{\\Delta TC}{\\Delta Q}",
                    hint: "Marginal cost is change in total cost over change in quantity. Use \\Delta for change."
                },
                {
                    text: "Express the GDP calculation using expenditure approach.",
                    answer: "GDP = C + I + G + (X - M)",
                    hint: "GDP equals consumption + investment + government spending + net exports."
                },
                {
                    text: "Write the price elasticity of demand formula.",
                    answer: "PED = \\frac{\\% \\text{ change in } Q_d}{\\% \\text{ change in } P}",
                    hint: "Use \\% for percent symbols, \\text{} for descriptive words, and \\frac{}{} for fractions."
                },
                {
                    text: "Express the multiplier effect formula in macroeconomics.",
                    answer: "\\text{Multiplier} = \\frac{1}{1 - MPC} = \\frac{1}{MPS}",
                    hint: "Use \\text{} for words, \\frac{}{} for fractions. MPC is marginal propensity to consume."
                },
                {
                    text: "Write the consumer surplus formula using integration.",
                    answer: "CS = \\int_0^{Q^*} P_d(Q) dQ - P^* \\times Q^*",
                    hint: "Use \\int for integration, _{} for limits, ^ for superscripts, and \\times for multiplication."
                },
                {
                    text: "Create a supply and demand schedule table.",
                    answer: "\\begin{array}{|c|c|c|} \\hline \\text{Price (\\$)} & \\text{Quantity Demanded} & \\text{Quantity Supplied} \\\\ \\hline 10 & 100 & 20 \\\\ 15 & 80 & 40 \\\\ 20 & 60 & 60 \\\\ 25 & 40 & 80 \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|c|} for three-column table, \\$ for currency, and \\text{} for headers."
                }
            ],
            psychology: [
                {
                    text: "Write a simple mean calculation: sum divided by n.",
                    answer: "\\bar{x} = \\frac{\\sum x}{n}",
                    hint: "Use \\bar{x} for sample mean, \\sum for summation, and \\frac{}{} for the fraction."
                },
                {
                    text: "Express the z-score standardization formula.",
                    answer: "z = \\frac{x - \\mu}{\\sigma}",
                    hint: "Use \\mu for population mean, \\sigma for standard deviation, and \\frac{}{} for the fraction."
                },
                {
                    text: "Write the standard error of the mean formula.",
                    answer: "SE = \\frac{s}{\\sqrt{n}}",
                    hint: "Use s for sample standard deviation, \\sqrt{} for square root, and n for sample size."
                },
                {
                    text: "Express the t-test statistic for one sample.",
                    answer: "t = \\frac{\\bar{x} - \\mu}{\\frac{s}{\\sqrt{n}}}",
                    hint: "Use \\bar{x} for sample mean, \\mu for hypothesized mean, and nested fractions."
                },
                {
                    text: "Write Cohen's d effect size formula.",
                    answer: "d = \\frac{\\bar{x}_1 - \\bar{x}_2}{s_p}",
                    hint: "Use \\bar{} for means, _{} for subscripts, and s_p for pooled standard deviation."
                },
                {
                    text: "Express the Pearson correlation coefficient formula.",
                    answer: "r = \\frac{\\sum(x_i - \\bar{x})(y_i - \\bar{y})}{\\sqrt{\\sum(x_i - \\bar{x})^2\\sum(y_i - \\bar{y})^2}}",
                    hint: "Use \\sum for summation, \\bar{} for means, and \\sqrt{} for square root."
                },
                {
                    text: "Write the chi-square test statistic formula.",
                    answer: "\\chi^2 = \\sum \\frac{(O - E)^2}{E}",
                    hint: "Use \\chi for chi-square, \\sum for summation, where O is observed and E is expected."
                },
                {
                    text: "Express the confidence interval for a mean.",
                    answer: "CI = \\bar{x} \\pm t_{\\alpha/2} \\frac{s}{\\sqrt{n}}",
                    hint: "Use \\pm for plus-minus, \\bar{x} for sample mean, and \\alpha for significance level."
                },
                {
                    text: "Write the ANOVA F-statistic formula.",
                    answer: "F = \\frac{MS_{between}}{MS_{within}}",
                    hint: "Use \\frac{}{} for fractions and _{} for subscripts on mean squares."
                },
                {
                    text: "Create a frequency distribution table for psychological test scores.",
                    answer: "\\begin{array}{|c|c|c|} \\hline \\text{Score Range} & \\text{Frequency} & \\text{Percentage} \\\\ \\hline 90-100 & 12 & 24\\% \\\\ 80-89 & 18 & 36\\% \\\\ 70-79 & 15 & 30\\% \\\\ 60-69 & 5 & 10\\% \\\\ \\hline \\text{Total} & 50 & 100\\% \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|c|} for three-column table, \\text{} for labels, and \\% for percentages."
                }
            ],
            geography: [
                {
                    text: "Write the population density formula.",
                    answer: "\\text{Density} = \\frac{\\text{Population}}{\\text{Area}}",
                    hint: "Use \\text{} for descriptive words and \\frac{}{} for the fraction."
                },
                {
                    text: "Express the natural population growth rate.",
                    answer: "\\text{Growth Rate} = \\text{Birth Rate} - \\text{Death Rate}",
                    hint: "Use \\text{} for descriptive words. This gives the natural increase rate."
                },
                {
                    text: "Write the urban primacy index formula.",
                    answer: "\\text{Primacy Index} = \\frac{P_1}{P_2}",
                    hint: "Use _{} for subscripts where P₁ is largest city, P₂ is second largest city."
                },
                {
                    text: "Express the rank-size rule for urban settlements.",
                    answer: "P_r = \\frac{P_1}{r}",
                    hint: "Use _{} for subscripts where P_r is population of rank r city, P_1 is largest city."
                },
                {
                    text: "Write the distance decay function for spatial interaction.",
                    answer: "I = \\frac{k}{d^\\beta}",
                    hint: "Use \\frac{}{} for fractions, ^ for exponents, and \\beta for the distance decay parameter."
                },
                {
                    text: "Express the gravity model for migration flows.",
                    answer: "M_{ij} = k \\frac{P_i P_j}{d_{ij}^2}",
                    hint: "Use _{} for subscripts, ^ for superscripts, and \\frac{}{} for fractions."
                },
                {
                    text: "Write the location quotient formula for economic specialization.",
                    answer: "LQ = \\frac{\\frac{e_i}{e}}{\\frac{E_i}{E}}",
                    hint: "Use nested fractions with \\frac{}{} and _{} for subscripts."
                },
                {
                    text: "Express the centrality index for network analysis.",
                    answer: "C_i = \\sum_{j \\neq i} \\frac{1}{d_{ij}}",
                    hint: "Use \\sum for summation, \\neq for 'not equal', and _{} for subscripts."
                },
                {
                    text: "Write the Gini coefficient formula for spatial inequality.",
                    answer: "G = \\frac{1}{2n^2\\bar{y}}\\sum_{i=1}^n\\sum_{j=1}^n|y_i - y_j|",
                    hint: "Use \\bar{} for mean, \\sum for double summation, and | | for absolute value."
                },
                {
                    text: "Create a demographic transition model table.",
                    answer: "\\begin{array}{|c|c|c|c|} \\hline \\text{Stage} & \\text{Birth Rate} & \\text{Death Rate} & \\text{Population Growth} \\\\ \\hline 1 & \\text{High} & \\text{High} & \\text{Low} \\\\ 2 & \\text{High} & \\text{Falling} & \\text{High} \\\\ 3 & \\text{Falling} & \\text{Low} & \\text{Slowing} \\\\ 4 & \\text{Low} & \\text{Low} & \\text{Low} \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|c|c|c|c|} for four-column table and \\text{} for descriptive labels."
                }
            ],
            ess: [
                {
                    text: "Write a simple chemical equation: CO₂ + H₂O.",
                    answer: "CO_2 + H_2O",
                    hint: "Use _{} for subscripts. This represents carbon dioxide plus water."
                },
                {
                    text: "Express the net primary productivity equation.",
                    answer: "NPP = GPP - R",
                    hint: "Simple equation: Net Primary Productivity = Gross Primary Productivity - Respiration."
                },
                {
                    text: "Write the species-area relationship formula.",
                    answer: "S = cA^z",
                    hint: "Use ^ for the exponent z, where S is species number and A is area."
                },
                {
                    text: "Express the bioaccumulation factor formula.",
                    answer: "BAF = \\frac{C_{organism}}{C_{environment}}",
                    hint: "Use \\frac{}{} for fractions and _{} for subscripts."
                },
                {
                    text: "Write the photosynthesis equation with light energy.",
                    answer: "6CO_2 + 6H_2O + \\text{light energy} \\rightarrow C_6H_{12}O_6 + 6O_2",
                    hint: "Use _{} for subscripts, \\rightarrow for reaction arrow, and \\text{} for words."
                },
                {
                    text: "Express the ecological efficiency between trophic levels.",
                    answer: "\\text{Efficiency} = \\frac{\\text{Energy at level n+1}}{\\text{Energy at level n}} \\times 100\\%",
                    hint: "Use \\frac{}{} for fractions, \\times for multiplication, and \\% for percent."
                },
                {
                    text: "Write the Simpson's diversity index formula.",
                    answer: "D = 1 - \\sum \\left(\\frac{n_i}{N}\\right)^2",
                    hint: "Use \\sum for summation, \\left( \\right) for parentheses, and ^ for superscripts."
                },
                {
                    text: "Express the logistic growth equation with carrying capacity K.",
                    answer: "\\frac{dN}{dt} = rN\\left(1 - \\frac{N}{K}\\right)",
                    hint: "Use \\frac{dN}{dt} for rate of change, \\left( \\right) for parentheses, K is carrying capacity."
                },
                {
                    text: "Write the carbon footprint calculation formula.",
                    answer: "CF = \\sum_{i} A_i \\times EF_i",
                    hint: "Use \\sum for summation, _{} for subscripts, and \\times for multiplication."
                },
                {
                    text: "Create an energy flow table showing trophic levels.",
                    answer: "\\begin{array}{|l|c|c|} \\hline \\text{Trophic Level} & \\text{Energy (kJ/m}^2\\text{)} & \\text{Efficiency} \\\\ \\hline \\text{Producers} & 10,000 & - \\\\ \\text{Primary Consumers} & 1,000 & 10\\% \\\\ \\text{Secondary Consumers} & 100 & 10\\% \\\\ \\text{Tertiary Consumers} & 10 & 10\\% \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|l|c|c|} for table structure, ^ for superscripts in units, and \\% for percentages."
                }
            ],
            sports: [
                {
                    text: "Write a simple speed calculation: distance ÷ time.",
                    answer: "\\text{Speed} = \\frac{\\text{Distance}}{\\text{Time}}",
                    hint: "Use \\text{} for words and \\frac{}{} for the fraction."
                },
                {
                    text: "Express the BMI calculation formula.",
                    answer: "BMI = \\frac{\\text{mass (kg)}}{\\text{height (m)}^2}",
                    hint: "Use \\frac{}{} for fractions, \\text{} for units, and ^ for squared height."
                },
                {
                    text: "Write the heart rate reserve formula.",
                    answer: "HRR = HR_{max} - HR_{rest}",
                    hint: "Use _{} for subscripts to show maximum and resting heart rates."
                },
                {
                    text: "Express the power equation in sports science.",
                    answer: "P = \\frac{W}{t}",
                    hint: "Power equals work divided by time. Use \\frac{}{} for the fraction."
                },
                {
                    text: "Write the target heart rate zone formula.",
                    answer: "THR = (HR_{max} - HR_{rest}) \\times \\text{Intensity \\%} + HR_{rest}",
                    hint: "Use _{} for subscripts, \\times for multiplication, and \\text{} for words."
                },
                {
                    text: "Express the relative strength calculation.",
                    answer: "\\text{Relative Strength} = \\frac{\\text{Absolute Strength}}{\\text{Body Weight}}",
                    hint: "Use \\text{} for descriptive words and \\frac{}{} for the fraction."
                },
                {
                    text: "Write the VO₂ max calculation formula.",
                    answer: "VO_2 \\text{max} = \\frac{\\text{O}_2 \\text{ consumed (ml)}}{\\text{Body weight (kg)} \\times \\text{Time (min)}}",
                    hint: "Use _{} for subscripts, \\text{} for words and units, and \\frac{}{} for fractions."
                },
                {
                    text: "Express the training load calculation.",
                    answer: "TL = \\text{Duration (min)} \\times \\text{Intensity (RPE)}",
                    hint: "Use \\text{} for descriptive words and \\times for multiplication. RPE is Rate of Perceived Exertion."
                },
                {
                    text: "Write the mechanical efficiency formula.",
                    answer: "\\eta = \\frac{\\text{Mechanical Power Output}}{\\text{Metabolic Power Input}} \\times 100\\%",
                    hint: "Use \\eta for efficiency, \\frac{}{} for fractions, \\times for multiplication, and \\% for percent."
                },
                {
                    text: "Create a heart rate training zones table.",
                    answer: "\\begin{array}{|l|c|c|} \\hline \\text{Zone} & \\text{\\% HR}_{max} & \\text{Purpose} \\\\ \\hline \\text{Recovery} & 50-60\\% & \\text{Active recovery} \\\\ \\text{Aerobic} & 60-70\\% & \\text{Base building} \\\\ \\text{Threshold} & 70-80\\% & \\text{Lactate threshold} \\\\ \\text{VO}_2\\text{max} & 80-90\\% & \\text{Max oxygen uptake} \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|l|c|c|} for table structure, _{} for subscripts, \\% for percentages."
                }
            ],
            business: [
                {
                    text: "Write a simple profit calculation: Revenue - Costs.",
                    answer: "\\text{Profit} = \\text{Revenue} - \\text{Costs}",
                    hint: "Use \\text{} for descriptive words. This is the basic profit equation."
                },
                {
                    text: "Express the current ratio formula.",
                    answer: "\\text{Current Ratio} = \\frac{\\text{Current Assets}}{\\text{Current Liabilities}}",
                    hint: "Use \\text{} for descriptive text and \\frac{}{} for the fraction."
                },
                {
                    text: "Write the return on investment (ROI) formula.",
                    answer: "ROI = \\frac{\\text{Net Profit}}{\\text{Investment}} \\times 100\\%",
                    hint: "Use \\frac{}{} for fractions, \\times for multiplication, and \\% for percentage."
                },
                {
                    text: "Express the break-even point calculation.",
                    answer: "\\text{Break-even} = \\frac{\\text{Fixed Costs}}{\\text{Price} - \\text{Variable Cost per unit}}",
                    hint: "Use \\text{} for descriptive text and \\frac{}{} for the fraction."
                },
                {
                    text: "Write the debt-to-equity ratio formula.",
                    answer: "\\text{D/E Ratio} = \\frac{\\text{Total Debt}}{\\text{Total Equity}}",
                    hint: "Use \\text{} for descriptive text and \\frac{}{} for the fraction."
                },
                {
                    text: "Express the gross profit margin calculation.",
                    answer: "\\text{Gross Margin} = \\frac{\\text{Revenue} - \\text{COGS}}{\\text{Revenue}} \\times 100\\%",
                    hint: "Use \\frac{}{} for fractions, \\times for multiplication, and \\% for percentage. COGS is Cost of Goods Sold."
                },
                {
                    text: "Write the inventory turnover ratio formula.",
                    answer: "\\text{Inventory Turnover} = \\frac{\\text{COGS}}{\\text{Average Inventory}}",
                    hint: "Use \\text{} for descriptive text and \\frac{}{} for the fraction."
                },
                {
                    text: "Express the price elasticity of demand for business.",
                    answer: "PED = \\frac{\\% \\text{ change in quantity}}{\\% \\text{ change in price}}",
                    hint: "Use \\% for percentage symbols, \\text{} for descriptive text, and \\frac{}{} for the fraction."
                },
                {
                    text: "Write the working capital calculation.",
                    answer: "\\text{Working Capital} = \\text{Current Assets} - \\text{Current Liabilities}",
                    hint: "Use \\text{} for descriptive words. This measures short-term financial health."
                },
                {
                    text: "Create a financial ratios comparison table.",
                    answer: "\\begin{array}{|l|c|c|} \\hline \\text{Ratio} & \\text{Company A} & \\text{Industry Average} \\\\ \\hline \\text{Current Ratio} & 2.1 & 1.8 \\\\ \\text{ROI} & 15\\% & 12\\% \\\\ \\text{Debt/Equity} & 0.4 & 0.6 \\\\ \\text{Gross Margin} & 35\\% & 30\\% \\\\ \\hline \\end{array}",
                    hint: "Use \\begin{array}{|l|c|c|} for table structure, \\text{} for labels, and \\% for percentages."
                }
            ]
        };

        // Base LaTeX functions that all subjects share
        const baseReferences = {
            "Basic Formatting": [
                { symbol: "Fractions", latex: "\\frac{a}{b}" },
                { symbol: "Superscripts", latex: "x^2" },
                { symbol: "Subscripts", latex: "x_1" },
                { symbol: "Square root", latex: "\\sqrt{x}" },
                { symbol: "Text in math", latex: "\\text{units}" }
            ],
            "Common Symbols": [
                { symbol: "Plus/minus", latex: "\\pm" },
                { symbol: "Multiplication", latex: "\\times" },
                { symbol: "Division", latex: "\\div" },
                { symbol: "Approximately", latex: "\\approx" },
                { symbol: "Not equal", latex: "\\neq" }
            ],
            "Greek Letters": [
                { symbol: "Alpha", latex: "\\alpha" },
                { symbol: "Beta", latex: "\\beta" },
                { symbol: "Delta", latex: "\\Delta" },
                { symbol: "Pi", latex: "\\pi" },
                { symbol: "Sigma", latex: "\\sigma" }
            ],
            "Table Structure": [
                { symbol: "Basic table", latex: "\\begin{array}{|c|c|} \\hline ... \\end{array}" },
                { symbol: "Column alignment", latex: "|l|c|r| (left, center, right)" },
                { symbol: "Horizontal line", latex: "\\hline" },
                { symbol: "Column separator", latex: "&" },
                { symbol: "New row", latex: "\\\\" }
            ]
        };

        const subjectSpecificReferences = {
            basics: {
                "Getting Started": [
                    { symbol: "Simple text", latex: "x, y, z" },
                    { symbol: "Basic math", latex: "2 + 3 = 5" },
                    { symbol: "Superscript", latex: "x^2" },
                    { symbol: "Subscript", latex: "H_2O" },
                    { symbol: "Simple fraction", latex: "\\frac{1}{2}" }
                ],
                "Essential Commands": [
                    { symbol: "Square root", latex: "\\sqrt{4}" },
                    { symbol: "Text in math", latex: "\\text{speed}" },
                    { symbol: "Greek pi", latex: "\\pi" },
                    { symbol: "Equals sign", latex: "=" },
                    { symbol: "Plus/minus", latex: "+" }
                ]
            },
            advanced: {
                "Complex Structures": [
                    { symbol: "Nested fractions", latex: "\\frac{\\frac{a}{b}}{\\frac{c}{d}}" },
                    { symbol: "Summation", latex: "\\sum_{i=1}^{n} x_i" },
                    { symbol: "Product", latex: "\\prod_{i=1}^{n} x_i" },
                    { symbol: "Limit", latex: "\\lim_{x \\to \\infty}" },
                    { symbol: "Integral", latex: "\\int_a^b f(x) dx" }
                ],
                "Matrices & Systems": [
                    { symbol: "Matrix (parentheses)", latex: "\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}" },
                    { symbol: "Matrix (brackets)", latex: "\\begin{bmatrix} a & b \\\\ c & d \\end{bmatrix}" },
                    { symbol: "Determinant", latex: "\\begin{vmatrix} a & b \\\\ c & d \\end{vmatrix}" },
                    { symbol: "Cases", latex: "\\begin{cases} x = 1 \\\\ y = 2 \\end{cases}" },
                    { symbol: "Binomial coefficient", latex: "\\binom{n}{k}" }
                ],
                "Advanced Calculus": [
                    { symbol: "Partial derivative", latex: "\\frac{\\partial f}{\\partial x}" },
                    { symbol: "Multiple integrals", latex: "\\iint_R f(x,y) dx dy" },
                    { symbol: "Large parentheses", latex: "\\left( \\frac{a}{b} \\right)" },
                    { symbol: "Spacing", latex: "\\, \\: \\; \\quad \\qquad" }
                ]
            },
            extreme: {
                "Advanced Symbols": [
                    { symbol: "Script letters", latex: "\\mathcal{F}, \\mathscr{L}" },
                    { symbol: "Bold math", latex: "\\mathbf{A}, \\boldsymbol{\\alpha}" },
                    { symbol: "Blackboard bold", latex: "\\mathbb{R}, \\mathbb{C}" },
                    { symbol: "Fraktur", latex: "\\mathfrak{g}, \\mathfrak{su}" },
                    { symbol: "Hat/tilde", latex: "\\hat{x}, \\tilde{y}, \\widehat{xyz}" }
                ],
                "Quantum & Physics": [
                    { symbol: "Bra-ket notation", latex: "\\langle \\psi | \\hat{H} | \\psi \\rangle" },
                    { symbol: "Reduced Planck", latex: "\\hbar" },
                    { symbol: "Operators", latex: "\\hat{H}, \\hat{p}" },
                    { symbol: "Commutator", latex: "[\\hat{A}, \\hat{B}]" },
                    { symbol: "Tensor indices", latex: "T^{\\mu\\nu}_{\\rho\\sigma}" }
                ],
                "Complex Structures": [
                    { symbol: "Aligned equations", latex: "\\begin{align} ... \\end{align}" },
                    { symbol: "Multicolumn", latex: "\\multicolumn{2}{c}{text}" },
                    { symbol: "Phantom spacing", latex: "\\phantom{abc}" },
                    { symbol: "Contour integral", latex: "\\oint_C f(z) dz" },
                    { symbol: "Triple integral", latex: "\\iiint_V f(x,y,z) dx dy dz" }
                ]
            },
            'math-aa-sl': {
                "Calculus": [
                    { symbol: "Derivative", latex: "\\frac{df}{dx}" },
                    { symbol: "Prime notation", latex: "f'(x)" },
                    { symbol: "Integral", latex: "\\int f(x) dx" },
                    { symbol: "Definite integral", latex: "\\int_a^b f(x) dx" },
                    { symbol: "Limit", latex: "\\lim_{x \\to a} f(x)" }
                ],
                "Functions": [
                    { symbol: "Exponential", latex: "e^x" },
                    { symbol: "Natural log", latex: "\\ln(x)" },
                    { symbol: "Trigonometric", latex: "\\sin(x), \\cos(x)" },
                    { symbol: "Inverse trig", latex: "\\sin^{-1}(x)" }
                ]
            },
            'math-aa-hl': {
                "Advanced Calculus": [
                    { symbol: "Partial derivative", latex: "\\frac{\\partial f}{\\partial x}" },
                    { symbol: "Double integral", latex: "\\iint_R f(x,y) \\, dx \\, dy" },
                    { symbol: "Taylor series", latex: "\\sum_{n=0}^{\\infty} \\frac{f^{(n)}(a)}{n!}(x-a)^n" },
                    { symbol: "Infinity", latex: "\\infty" }
                ],
                "Vectors & Complex": [
                    { symbol: "Vector", latex: "\\vec{r}" },
                    { symbol: "Dot product", latex: "\\vec{u} \\cdot \\vec{v}" },
                    { symbol: "Complex exponential", latex: "e^{i\\theta}" },
                    { symbol: "Matrix", latex: "\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}" }
                ]
            },
            'math-ai-sl': {
                "Statistics": [
                    { symbol: "Mean", latex: "\\bar{x}" },
                    { symbol: "Standard deviation", latex: "s" },
                    { symbol: "Summation", latex: "\\sum x_i" },
                    { symbol: "Square root", latex: "\\sqrt{x}" }
                ],
                "Probability": [
                    { symbol: "Normal distribution", latex: "N(\\mu, \\sigma^2)" },
                    { symbol: "Chi-square", latex: "\\chi^2" },
                    { symbol: "Correlation", latex: "r" },
                    { symbol: "Percentage", latex: "\\%" }
                ]
            },
            'math-ai-hl': {
                "Advanced Statistics": [
                    { symbol: "Beta coefficients", latex: "\\beta_0, \\beta_1" },
                    { symbol: "Error term", latex: "\\epsilon" },
                    { symbol: "Confidence interval", latex: "\\bar{x} \\pm t_{\\alpha/2}" },
                    { symbol: "Hat notation", latex: "\\hat{p}" }
                ],
                "Distributions": [
                    { symbol: "Binomial coefficient", latex: "\\binom{n}{k}" },
                    { symbol: "Lambda (Poisson)", latex: "\\lambda" },
                    { symbol: "Distributed as", latex: "\\sim" },
                    { symbol: "R-squared", latex: "R^2" }
                ]
            },
            physics: {
                "Vectors & Operators": [
                    { symbol: "Vector", latex: "\\vec{v}" },
                    { symbol: "Unit vector", latex: "\\hat{n}" },
                    { symbol: "Nabla", latex: "\\nabla" },
                    { symbol: "Dot product", latex: "\\vec{a} \\cdot \\vec{b}" }
                ],
                "Special Symbols": [
                    { symbol: "Epsilon", latex: "\\epsilon" },
                    { symbol: "Mu", latex: "\\mu" },
                    { symbol: "Psi", latex: "\\psi" },
                    { symbol: "Partial", latex: "\\partial" }
                ]
            },
            chemistry: {
                "Chemical Notation": [
                    { symbol: "Reaction arrow", latex: "\\rightarrow" },
                    { symbol: "Equilibrium", latex: "\\rightleftharpoons" },
                    { symbol: "Concentration", latex: "[A]" },
                    { symbol: "Reversible", latex: "\\leftrightarrow" }
                ],
                "Math Functions": [
                    { symbol: "Logarithm", latex: "\\log" },
                    { symbol: "Natural log", latex: "\\ln" },
                    { symbol: "Large parentheses", latex: "\\left( \\right)" }
                ]
            },
            biology: {
                "Population & Growth": [
                    { symbol: "Population size", latex: "N" },
                    { symbol: "Growth rate", latex: "r" },
                    { symbol: "Carrying capacity", latex: "K" },
                    { symbol: "Derivative", latex: "\\frac{dN}{dt}" }
                ],
                "Statistics": [
                    { symbol: "Summation", latex: "\\sum_{i=1}^S" },
                    { symbol: "Natural log", latex: "\\ln" },
                    { symbol: "Prime notation", latex: "H'" },
                    { symbol: "Concentration", latex: "[S]" }
                ]
            },
            economics: {
                "Economic Variables": [
                    { symbol: "Change (Delta)", latex: "\\Delta" },
                    { symbol: "Percent", latex: "\\%" },
                    { symbol: "Infinity", latex: "\\infty" },
                    { symbol: "Subscripts", latex: "Q_d, Q_s" }
                ],
                "Functions": [
                    { symbol: "Large parentheses", latex: "\\left( \\right)" },
                    { symbol: "Overline (mean)", latex: "\\bar{x}" },
                    { symbol: "Logarithm", latex: "\\log" }
                ]
            },
            psychology: {
                "Statistics": [
                    { symbol: "Mean", latex: "\\bar{x}" },
                    { symbol: "Standard deviation", latex: "\\sigma" },
                    { symbol: "Summation", latex: "\\sum" },
                    { symbol: "Mu (population mean)", latex: "\\mu" }
                ],
                "Test Statistics": [
                    { symbol: "Z-score", latex: "z" },
                    { symbol: "T-statistic", latex: "t" },
                    { symbol: "Correlation", latex: "r" },
                    { symbol: "Chi-square", latex: "\\chi^2" }
                ]
            },
            geography: {
                "Geographic Variables": [
                    { symbol: "Population", latex: "P_1, P_2" },
                    { symbol: "Distance", latex: "d_{ij}" },
                    { symbol: "Interaction", latex: "I_{ij}" },
                    { symbol: "Constant", latex: "k" }
                ],
                "Calculations": [
                    { symbol: "Rate per 1000", latex: "\\frac{\\text{Rate}}{1000}" },
                    { symbol: "Index ratio", latex: "\\frac{P_1}{P_2}" }
                ]
            },
            ess: {
                "Chemical Equations": [
                    { symbol: "Chemical formulas", latex: "CO_2, H_2O" },
                    { symbol: "Reaction arrow", latex: "\\rightarrow" },
                    { symbol: "Subscripts", latex: "C_6H_{12}O_6" },
                    { symbol: "Light energy", latex: "\\text{light energy}" }
                ],
                "Ecological Math": [
                    { symbol: "Summation", latex: "\\sum" },
                    { symbol: "Percent", latex: "\\%" },
                    { symbol: "Efficiency ratio", latex: "\\frac{\\text{Output}}{\\text{Input}}" },
                    { symbol: "Large parentheses", latex: "\\left( \\right)" }
                ]
            },
            sports: {
                "Physiological Variables": [
                    { symbol: "VO₂ max", latex: "VO_2 \\text{max}" },
                    { symbol: "Heart rate", latex: "HR_{max}, HR_{rest}" },
                    { symbol: "Body mass index", latex: "BMI" },
                    { symbol: "Power", latex: "P" }
                ],
                "Units & Measurements": [
                    { symbol: "Units in text", latex: "\\text{kg}, \\text{m}" },
                    { symbol: "Time units", latex: "\\text{min}, \\text{sec}" },
                    { symbol: "Volume units", latex: "\\text{ml}, \\text{L}" },
                    { symbol: "Squared units", latex: "\\text{m}^2" }
                ]
            },
            business: {
                "Financial Notation": [
                    { symbol: "Currency", latex: "\\$" },
                    { symbol: "Percentage", latex: "\\%" },
                    { symbol: "Bold text", latex: "\\textbf{Total}" },
                    { symbol: "Fractions", latex: "\\frac{\\text{Numerator}}{\\text{Denominator}}" },
                    { symbol: "Multiplication", latex: "\\times" }
                ]
            }
        };

        let currentSubject = 'basics';
        let currentChallengeIndex = 0;

        function initializeApp() {
            updateSubject('basics');
            renderPreview();
            
            // Add event listener for real-time preview
            document.getElementById('latexInput').addEventListener('input', renderPreview);
        }

        function updateSubject(subject) {
            currentSubject = subject;
            currentChallengeIndex = 0;
            
            // Update active button
            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.subject === subject) {
                    btn.classList.add('active');
                }
            });
            
            // Load first challenge
            loadChallenge();
            
            // Update reference section
            updateReference();
            
            // Clear feedback and hints
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('hintBox').innerHTML = '';
        }

        function loadChallenge() {
            const challenge = challenges[currentSubject][currentChallengeIndex];
            document.getElementById('challengeText').textContent = challenge.text;
            document.getElementById('latexInput').value = '';
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('hintBox').innerHTML = '';
            
            // Update challenge counter
            document.getElementById('challengeCounter').textContent = `${currentChallengeIndex + 1} of 10`;
            
            renderPreview();
            showExpectedOutput();
        }

        function checkAnswer() {
            const userInput = document.getElementById('latexInput').value.trim();
            const correctAnswer = challenges[currentSubject][currentChallengeIndex].answer;
            const feedback = document.getElementById('feedback');
            
            // Simple comparison (could be enhanced with more sophisticated matching)
            const isCorrect = userInput.toLowerCase().replace(/\s+/g, '') === 
                             correctAnswer.toLowerCase().replace(/\s+/g, '') ||
                             correctAnswer.split(' \\text{ or } ').some(alt => 
                                 userInput.toLowerCase().replace(/\s+/g, '') === 
                                 alt.toLowerCase().replace(/\s+/g, ''));
            
            if (isCorrect) {
                feedback.innerHTML = '🎉 Correct! Well done!';
                feedback.className = 'feedback correct';
            } else {
                feedback.innerHTML = `❌ Not quite right. The correct answer is: <code>${correctAnswer}</code>`;
                feedback.className = 'feedback incorrect';
            }
        }

        function showHint() {
            const hint = challenges[currentSubject][currentChallengeIndex].hint;
            const hintBox = document.getElementById('hintBox');
            hintBox.innerHTML = `💡 <strong>Hint:</strong> ${hint}`;
            hintBox.className = 'hint-box';
        }

        function nextChallenge() {
            currentChallengeIndex = (currentChallengeIndex + 1) % challenges[currentSubject].length;
            loadChallenge();
        }

        function renderPreview() {
            const input = document.getElementById('latexInput').value;
            const previewBox = document.getElementById('previewBox');
            
            if (input.trim() === '') {
                previewBox.innerHTML = '<span style="color: #6c757d;">Your LaTeX will render here...</span>';
                return;
            }
            
            // Wrap input in display math mode if not already wrapped
            let mathInput = input;
            if (!input.startsWith('$') && !input.startsWith('\\[')) {
                mathInput = `$$${input}$$`;
            }
            
            previewBox.innerHTML = mathInput;
            
            // Re-render MathJax
            if (window.MathJax) {
                MathJax.typesetPromise([previewBox]).catch((err) => {
                    previewBox.innerHTML = '<span style="color: #dc3545;">Error rendering LaTeX</span>';
                });
            }
        }

        function clearInput() {
            document.getElementById('latexInput').value = '';
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('hintBox').innerHTML = '';
            renderPreview();
        }
        
        function showExpectedOutput() {
            const challenge = challenges[currentSubject][currentChallengeIndex];
            const expectedOutputBox = document.getElementById('expectedOutputBox');
            
            // Handle multiple correct answers
            const answers = challenge.answer.split(' \\text{ or } ');
            const displayAnswer = answers[0]; // Show the first (primary) answer
            
            const mathInput = `$$${displayAnswer}$$`;
            expectedOutputBox.innerHTML = mathInput;
            
            // Re-render MathJax for expected output
            if (window.MathJax) {
                MathJax.typesetPromise([expectedOutputBox]).catch((err) => {
                    expectedOutputBox.innerHTML = '<span style="color: #dc3545;">Error rendering expected output</span>';
                });
            }
        }

        function updateReference() {
            const referenceGrid = document.getElementById('referenceGrid');
            referenceGrid.innerHTML = '';
            
            // Always show base references first
            Object.entries(baseReferences).forEach(([category, items]) => {
                const card = document.createElement('div');
                card.className = 'reference-card';
                card.innerHTML = `
                    <h4>${category}</h4>
                    ${items.map(item => `
                        <div class="reference-item">
                            <span>${item.symbol}</span>
                            <code class="latex-code">${item.latex}</code>
                        </div>
                    `).join('')}
                `;
                referenceGrid.appendChild(card);
            });
            
            // Then show subject-specific references
            const subjectRefs = subjectSpecificReferences[currentSubject];
            if (subjectRefs) {
                Object.entries(subjectRefs).forEach(([category, items]) => {
                    const card = document.createElement('div');
                    card.className = 'reference-card';
                    card.innerHTML = `
                        <h4>${category}</h4>
                        ${items.map(item => `
                            <div class="reference-item">
                                <span>${item.symbol}</span>
                                <code class="latex-code">${item.latex}</code>
                            </div>
                        `).join('')}
                    `;
                    referenceGrid.appendChild(card);
                });
            }
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', initializeApp);
        
        document.querySelectorAll('.subject-btn').forEach(btn => {
            btn.addEventListener('click', () => updateSubject(btn.dataset.subject));
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97ff6421471bd03c',t:'MTc1ODAxNTUwOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
